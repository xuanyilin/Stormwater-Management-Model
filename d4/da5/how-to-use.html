<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SWMM-Docs: How to Use the Toolkit</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SWMM-Docs
   &#160;<span id="projectnumber">5.2.0.dev3</span>
   </div>
   <div id="projectbrief">Stormwater Management Model</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../index.html">Open Water Analytics Stormwater Management Model</a></li><li class="navelem"><a class="el" href="../../d0/dfb/toolkit-overview.html">Toolkit Overview</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to Use the Toolkit </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Full Function collection can be found <a class="el" href="../../dc/dce/toolkit_a_p_i_8h.html">toolkitAPI.h</a></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d1/dd1/swmm5_8h.html">swmm5.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../dc/dce/toolkit_a_p_i_8h.html">toolkitAPI.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">long</span> newHour, oldHour = 0;</div><div class="line"><span class="keywordtype">long</span> theDay, theHour;</div><div class="line"><span class="keywordtype">double</span> elapsedTime = 0.0;</div><div class="line"></div><div class="line"><span class="keywordtype">char</span> *inputFile;</div><div class="line"><span class="keywordtype">char</span> *reportFile;</div><div class="line"><span class="keywordtype">char</span> *binaryFile;</div><div class="line"></div><div class="line">inputFile = <span class="stringliteral">&quot;&lt;path2&gt;/inputfile.inp&quot;</span>;</div><div class="line">reportFile = <span class="stringliteral">&quot;&lt;path2&gt;/reportfile.rpt&quot;</span>;</div><div class="line">binaryFile = <span class="stringliteral">&quot;&lt;path2&gt;/outputfile.out&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">// Open the files &amp; read input data</span></div><div class="line">ErrorCode = <a class="code" href="../../d1/dd1/swmm5_8h.html#a2da4baa38e451ef2a978f1366898948e">swmm_open</a>(inputFile, reportFile, binaryFile);</div><div class="line"></div><div class="line"><span class="comment">// Run the simulation if input data OK</span></div><div class="line"><span class="keywordflow">if</span> ( !ErrorCode )</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> ndType;</div><div class="line">    <span class="keywordtype">double</span> depth = 0;</div><div class="line"></div><div class="line">    <a class="code" href="../../d6/d2f/group___network_info.html#gae66a64aee207928c902cb399222cf418">swmm_getNodeType</a>(0, &amp;ndType);</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;Node Type: %d&quot;</span>, ndType); \\ Print node type (See <a class="code" href="../../dc/dce/toolkit_a_p_i_8h.html#a10b2a8f7c7f2a84ec03332d6cf963cf1">SM_NodeType</a>)</div><div class="line"></div><div class="line">    <span class="comment">// Initialize values and Start the Simulation</span></div><div class="line">    ErrorCode = <a class="code" href="../../d1/dd1/swmm5_8h.html#a06eb7b28597a24f892edfc303e12b2d7">swmm_start</a>(TRUE);</div><div class="line"></div><div class="line">    <span class="comment">// Execute each time step until elapsed time is re-set to 0</span></div><div class="line">    <span class="keywordflow">if</span> ( !ErrorCode )</div><div class="line">    {</div><div class="line">        <span class="keywordflow">do</span></div><div class="line">        {</div><div class="line">            ErrorCode = <a class="code" href="../../d1/dd1/swmm5_8h.html#a20624449e77d94d71c0e61d7f58558b5">swmm_step</a>(&amp;elapsedTime);</div><div class="line"></div><div class="line">            <a class="code" href="../../d2/da4/group__tkfuncs.html#gacef44d121a8f9a646f4e6f108b494373">swmm_getNodeResult</a>(0, <a class="code" href="../../dc/dce/toolkit_a_p_i_8h.html#aa5c50a52f0aa8cb1bcbb5130e8fa64e2a36c502c185c63b612ddc65ad469d027f">SM_NODEDEPTH</a>, &amp;depth) \\ Stream Results!</div><div class="line"></div><div class="line">            printf(<span class="stringliteral">&quot;Node Depth %lf&quot;</span>, depth); \\ Print node result (See <a class="code" href="../../dc/dce/toolkit_a_p_i_8h.html#aa5c50a52f0aa8cb1bcbb5130e8fa64e2">SM_NodeResult</a>)</div><div class="line"></div><div class="line">        } <span class="keywordflow">while</span> ( elapsedTime &gt; 0.0 &amp;&amp; !ErrorCode );</div><div class="line">    }</div><div class="line">    <span class="comment">// Clean up</span></div><div class="line">    ErrorCode = <a class="code" href="../../d1/dd1/swmm5_8h.html#a8e69e10ab4948522041deb92fc4b43c0">swmm_end</a>();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Get Stats for Node</span></div><div class="line"><a class="code" href="../../df/df5/struct_s_m___node_stats.html">SM_NodeStats</a>* Node0Stats;</div><div class="line"><a class="code" href="../../d2/da4/group__tkfuncs.html#ga0d52d8f1b900a0ef3d3df309c5df21f8">swmm_getNodeStats</a>(0, &amp;Node0Stats);</div><div class="line"></div><div class="line">printf(<span class="stringliteral">&quot;Node Max Depth %lf&quot;</span>, Node0Stats-&gt;avgDepth);</div><div class="line"></div><div class="line"><span class="comment">// Report results</span></div><div class="line"><a class="code" href="../../d1/dd1/swmm5_8h.html#aa19010a1a938610a22ef3e256a1e8604">swmm_report</a>();</div><div class="line"></div><div class="line"><span class="comment">// Close the system</span></div><div class="line"><a class="code" href="../../d1/dd1/swmm5_8h.html#a76dac918844d9551a1b39432284b70ef">swmm_close</a>();</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
